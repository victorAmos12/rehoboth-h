<div class="min-h-screen bg-slate-50 dark:bg-slate-900 p-8">
  <div class="max-w-2xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">
        {{ isEditMode() ? 'Modifier l\'Intervention' : 'Nouvelle Intervention' }}
      </h1>
      <p class="text-slate-600 dark:text-slate-400">
        {{ isEditMode() ? 'Modifiez les informations de l\'intervention' : 'Créez une nouvelle intervention de maintenance' }}
      </p>
    </div>

    <!-- Error Message -->
    @if (error()) {
      <div class="mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-center gap-3">
        <i class="fas fa-exclamation-circle text-red-500 dark:text-red-400"></i>
        <span class="text-red-700 dark:text-red-300">{{ error() }}</span>
      </div>
    }

    <!-- Loading State -->
    @if (loading()) {
      <div class="flex flex-col items-center justify-center py-12 gap-4">
        <i class="fas fa-spinner animate-spin text-2xl text-slate-400"></i>
        <p class="text-slate-600 dark:text-slate-400">Chargement...</p>
      </div>
    } @else {
      <!-- Form -->
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 space-y-6">
        <!-- Numéro Intervention -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">
            Numéro d'Intervention <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            formControlName="numero_intervention"
            placeholder="ex: INT001"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (form.get('numero_intervention')?.invalid && form.get('numero_intervention')?.touched) {
            <p class="mt-1 text-sm text-red-600 dark:text-red-400">Numéro requis (min 2 caractères)</p>
          }
        </div>

        <!-- Date Intervention -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">
            Date d'Intervention <span class="text-red-500">*</span>
          </label>
          <input
            type="date"
            formControlName="date_intervention"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (form.get('date_intervention')?.invalid && form.get('date_intervention')?.touched) {
            <p class="mt-1 text-sm text-red-600 dark:text-red-400">Date requise</p>
          }
        </div>

        <!-- Type Intervention -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">Type d'Intervention</label>
          <select
            formControlName="type_intervention"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <option value="">Sélectionner un type</option>
            <option value="Préventive">Préventive</option>
            <option value="Corrective">Corrective</option>
            <option value="Urgente">Urgente</option>
          </select>
        </div>

        <!-- Description -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">Description</label>
          <textarea
            formControlName="description_intervention"
            placeholder="Description de l'intervention..."
            rows="4"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          ></textarea>
        </div>

        <!-- Pièces Remplacées -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">Pièces Remplacées</label>
          <textarea
            formControlName="pieces_remplacees"
            placeholder="Liste des pièces remplacées..."
            rows="3"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          ></textarea>
        </div>

        <!-- Durée Intervention -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">Durée (heures)</label>
          <input
            type="number"
            formControlName="duree_intervention"
            min="0"
            step="0.5"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <!-- Coût Intervention -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">Coût</label>
          <input
            type="number"
            formControlName="cout_intervention"
            min="0"
            step="0.01"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <!-- Statut -->
        <div>
          <label class="block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">Statut</label>
          <select
            formControlName="statut"
            class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <option value="planifiee">Planifiée</option>
            <option value="en-cours">En Cours</option>
            <option value="completee">Complétée</option>
            <option value="annulee">Annulée</option>
          </select>
        </div>

        <!-- Buttons -->
        <div class="flex gap-3 pt-6 border-t border-slate-200 dark:border-slate-700">
          <button
            type="submit"
            [disabled]="loading()"
            class="flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2"
          >
            @if (loading()) {
              <i class="fas fa-spinner animate-spin"></i>
              <span>Enregistrement...</span>
            } @else {
              <i class="fas fa-save"></i>
              <span>{{ isEditMode() ? 'Modifier' : 'Créer' }}</span>
            }
          </button>
          <button
            type="button"
            (click)="onCancel()"
            class="flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors"
          >
            Annuler
          </button>
        </div>
      </form>
    }
  </div>
</div>
